<template id="tables">
    <div data-bind="with: tradeController">
        <div data-bind="foreach: $parent.userMarkets">
            <span data-bind="template: { name:'marketplace-tpl' }, click: $parent.onMarketPlaceSelection">
            </span>
        </div>
        <br>

        <div data-bind="flip: selectedInstr()">
            <div>
                <div class="front">
                    <rl-grid params="table: 'Instrument',
                         subscribe: subscription,
                         columns: [ 'name', 'bidQty', 'bid', 'ask', 'askQty', 'lastPrc','lastQty' ],
                         onSelection: tableSelected,
                         width: '520px'
                        ">
                    </rl-grid>
                </div>
                <div class="back">
                    <table>
                        <tr>
                            <td>
                                <rl-grid params="table: 'Instrument',
                                                 subscribe: instrSubscription,
                                                 columns: [ 'name', 'bidQty', 'bid', 'ask', 'askQty', 'lastPrc', 'lastQty' ],
                                                 width: '520px'
                                                 ">
                                </rl-grid>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <table>
                                    <tr>
                                        <td style="padding: 3px 2px; width: 70px;">
                                            <ns-input params="
                                               placeHolder: 'Price',
                                               maxLength: 5,
                                               value: buyPrc,
                                               align: 'right',
                                               validator: 'Number'
                                            ">
                                            </ns-input>
                                        </td>
                                        <td style="padding: 3px 2px; width: 60px;">
                                            <ns-input params="
                                               placeHolder: 'Qty',
                                               maxLength: 3,
                                               value: buyQty,
                                               align: 'right',
                                               validator: 'Int'
                                            ">
                                            </ns-input>
                                        </td>
                                        <td style="padding-left: 4px; padding-bottom: 3px; padding-top: 3px; border: none;">
                                            <button class="buyBox" style="border: none;"><b>Buy</b></button>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <div style="border: 3px solid #711;">
                                    <rl-grid params="
                                        table: 'Order',
                                        subscribe: orderBuySubscription,
                                        columns: [ 'limitPrice', 'qty', 'traderKey', 'text' ],
                                        sortKey: 'limitPrice',
                                        noColumns: true,
                                        noStriping: true
                                    ">
                                    </rl-grid>
                                </div>
                            </td>
                        </tr>
                        <!--<tr><td>&nbsp;</td></tr>-->
                        <tr>
                            <td align="left">
                                <div style="border: 3px solid #117;">
                                    <rl-grid params="
                                        table: 'Order',
                                        subscribe: orderSellSubscription,
                                        columns: [ 'text', 'traderKey', 'qty', 'limitPrice'],
                                        sortKey: 'limitPrice',
                                        noColumns: true,
                                        noStriping: true
                                    ">
                                    </rl-grid>
                                </div>
                                <table>
                                    <tr>
                                        <td style="padding: 3px 2px; width: 70px;">
                                            <ns-input params="
                                               placeHolder: 'Price',
                                               maxLength: 5,
                                               value: sellPrc,
                                               align: 'right',
                                               validator: 'Number'
                                            ">
                                            </ns-input>
                                        </td>
                                        <td style="padding: 3px 2px; width: 60px;">
                                            <ns-input params="
                                               placeHolder: 'Qty',
                                               maxLength: 3,
                                               value: sellQty,
                                               align: 'right',
                                               validator: 'Int',
                                               width: '60px'
                                            ">
                                            </ns-input>
                                        </td>
                                        <td style="padding-left: 4px; padding-bottom: 3px; padding-top: 3px;">
                                            <button class="sellBox" style="border: none; "><b>Sell</b></button>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</template>
